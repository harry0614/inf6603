<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_2.dtd'>
<nta>
	<declaration>// Place global declarations here.

chan c1,c2,c3;

int volTrans;</declaration>
	<template>
		<name x="5" y="5">Seau</name>
		<parameter>int volMax</parameter>
		<declaration>// Place local declarations here.

int vol = 0;</declaration>
		<location id="id0" x="-110" y="-204">
			<name x="-120" y="-238">transIn</name>
		</location>
		<location id="id1" x="-110" y="25">
			<name x="-135" y="42">transOut</name>
		</location>
		<location id="id2" x="93" y="-85">
			<name x="119" y="-94">intern</name>
		</location>
		<location id="id3" x="-144" y="204">
			<name x="-152" y="238">out</name>
		</location>
		<location id="id4" x="-144" y="-306">
			<name x="-153" y="-340">in</name>
		</location>
		<location id="id5" x="-391" y="-76">
			<name x="-459" y="-84">ide</name>
		</location>
		<init ref="id5"/>
		<transition>
			<source ref="id0"/>
			<target ref="id5"/>
			<label kind="guard" x="-306" y="-263">volMax == vol + volTrans</label>
			<label kind="synchronisation" x="-306" y="-246">c3?</label>
			<label kind="assignment" x="-306" y="-229">vol := volMax</label>
			<nail x="-263" y="-246"/>
		</transition>
		<transition>
			<source ref="id1"/>
			<target ref="id5"/>
			<label kind="guard" x="-331" y="51">vol - volTrans &lt;= 0</label>
			<label kind="synchronisation" x="-331" y="68">c3!</label>
			<label kind="assignment" x="-331" y="85">volTrans := vol,
vol := 0</label>
			<nail x="-263" y="110"/>
		</transition>
		<transition>
			<source ref="id5"/>
			<target ref="id1"/>
			<label kind="guard" x="-230" y="-85">vol == volMax</label>
			<label kind="synchronisation" x="-229" y="-68">c1!</label>
			<label kind="assignment" x="-229" y="-51">volTrans = vol</label>
			<nail x="-153" y="-68"/>
		</transition>
		<transition>
			<source ref="id0"/>
			<target ref="id5"/>
			<label kind="guard" x="-306" y="-153">volMax &lt; (vol + volTrans)</label>
			<label kind="synchronisation" x="-306" y="-136">c2!</label>
			<label kind="assignment" x="-306" y="-119">volTrans := (volMax - vol),
vol := volMax</label>
			<nail x="-161" y="-127"/>
		</transition>
		<transition>
			<source ref="id5"/>
			<target ref="id3"/>
			<label kind="guard" x="-323" y="153">vol != 0</label>
			<nail x="-340" y="170"/>
		</transition>
		<transition>
			<source ref="id4"/>
			<target ref="id5"/>
			<label kind="assignment" x="-365" y="-289">vol := volMax</label>
			<nail x="-348" y="-272"/>
			<nail x="-348" y="-272"/>
			<nail x="-348" y="-272"/>
		</transition>
		<transition>
			<source ref="id2"/>
			<target ref="id3"/>
			<label kind="guard" x="0" y="178">vol != 0</label>
			<nail x="93" y="204"/>
		</transition>
		<transition>
			<source ref="id2"/>
			<target ref="id4"/>
			<label kind="guard" x="8" y="-331">vol != volMax</label>
			<nail x="93" y="-306"/>
		</transition>
		<transition>
			<source ref="id2"/>
			<target ref="id0"/>
			<label kind="synchronisation" x="-51" y="-144">c1?</label>
			<nail x="-43" y="-119"/>
		</transition>
		<transition>
			<source ref="id0"/>
			<target ref="id2"/>
			<label kind="guard" x="-68" y="-221">volMax &gt; vol + volTrans</label>
			<label kind="synchronisation" x="-68" y="-204">c3?</label>
			<label kind="assignment" x="-68" y="-187">vol = vol + volTrans</label>
			<nail x="-8" y="-187"/>
		</transition>
		<transition>
			<source ref="id5"/>
			<target ref="id0"/>
			<label kind="guard" x="-289" y="-212">vol == 0</label>
			<label kind="synchronisation" x="-289" y="-195">c1?</label>
			<nail x="-280" y="-187"/>
		</transition>
		<transition>
			<source ref="id2"/>
			<target ref="id1"/>
			<label kind="synchronisation" x="-34" y="0">c1!</label>
			<label kind="assignment" x="-34" y="25">volTrans = vol</label>
			<nail x="0" y="17"/>
		</transition>
		<transition>
			<source ref="id1"/>
			<target ref="id2"/>
			<label kind="guard" x="-93" y="-93">vol - volTrans &gt; 0</label>
			<label kind="synchronisation" x="-93" y="-76">c2?</label>
			<label kind="assignment" x="-93" y="-59">vol = vol - volTrans</label>
			<nail x="-42" y="-68"/>
		</transition>
		<transition>
			<source ref="id1"/>
			<target ref="id5"/>
			<label kind="guard" x="-306" y="-25">vol - volTrans == 0</label>
			<label kind="synchronisation" x="-306" y="-8">c2?</label>
			<label kind="assignment" x="-306" y="8">vol := 0</label>
			<nail x="-255" y="0"/>
		</transition>
		<transition>
			<source ref="id3"/>
			<target ref="id5"/>
			<label kind="assignment" x="-399" y="212">vol := 0</label>
			<nail x="-382" y="204"/>
		</transition>
		<transition>
			<source ref="id5"/>
			<target ref="id4"/>
			<label kind="guard" x="-348" y="-323">vol != volMax</label>
			<nail x="-391" y="-306"/>
		</transition>
	</template>
	<system>// Place template instantiations here.
S1 = Seau(5);
S2 = Seau(3);

// List one or more processes to be composed into a system.
system S1, S2;
    </system>
	<queries>
		<query>
			<formula>E&lt;&gt; not (S1.vol == 1 &amp;&amp; S2.vol == 1)
			</formula>
			<comment>
			</comment>
		</query>
		<query>
			<formula>A[] not deadlock
			</formula>
			<comment>
			</comment>
		</query>
	</queries>
</nta>
